---
import { Section, H2, H3, H4, P, BgImg, Image, Icon, Button } from "ui";
import SectionHeader from "@/components/SectionHeader.astro";

// Pricing data structure
const pricingData = [
  {
    id: 1,
    title: "Проектирование",
    services: [
      { name: "Эскизный проект (ЭП)", price: "9999 руб/м²", hasButton: true, isFirst: true },
      { name: "Эскизный проект (ЭП)", price: "9999 руб/м²", hasButton: true },
      { name: "Эскизный проект (ЭП)", price: "9999 руб/м²", hasButton: true },
      { name: "Эскизный проект (ЭП)", price: "9999 руб/м²", hasButton: true },
      { name: "Эскизный проект (ЭП)", price: "9999 руб/м²", hasButton: true },
      { name: "Эскизный проект (ЭП)", price: "9999 руб/м²", hasButton: true },
      { name: "Эскизный проект (ЭП)", price: "9999 руб/м²", hasButton: true },
    ],
  },
  {
    id: 2,
    title: "Дизайн интерьера",
    services: [
      { name: "Эскизный проект (ЭП)", price: "9999 руб/м²", hasButton: true },
      { name: "Эскизный проект (ЭП)", price: "9999 руб/м²", hasButton: true },
      { name: "Эскизный проект (ЭП)", price: "9999 руб/м²", hasButton: true },
      { name: "Эскизный проект (ЭП)", price: "9999 руб/м²", hasButton: true },
      { name: "Эскизный проект (ЭП)", price: "9999 руб/м²", hasButton: true },
      { name: "Эскизный проект (ЭП)", price: "9999 руб/м²", hasButton: true },
      { name: "Эскизный проект (ЭП)", price: "9999 руб/м²", hasButton: true },
    ],
  },
  {
    id: 3,
    title: "Готовые проекты",
    services: [
      { name: "Эскизный проект (ЭП)", price: "9999 руб/м²", hasButton: true },
      { name: "Эскизный проект (ЭП)", price: "9999 руб/м²", hasButton: true },
      { name: "Эскизный проект (ЭП)", price: "9999 руб/м²", hasButton: true },
      { name: "Эскизный проект (ЭП)", price: "9999 руб/м²", hasButton: true },
      { name: "Эскизный проект (ЭП)", price: "9999 руб/м²", hasButton: true },
      { name: "Эскизный проект (ЭП)", price: "9999 руб/м²", hasButton: true },
      { name: "Эскизный проект (ЭП)", price: "9999 руб/м²", hasButton: true },
    ],
  },
  {
    id: 4,
    title: "Ландшафтный дизайн",
    services: [
      { name: "Эскизный проект (ЭП)", price: "9999 руб/м²", hasButton: true },
      { name: "Эскизный проект (ЭП)", price: "9999 руб/м²", hasButton: true },
      { name: "Эскизный проект (ЭП)", price: "9999 руб/м²", hasButton: true },
      { name: "Эскизный проект (ЭП)", price: "9999 руб/м²", hasButton: true },
      { name: "Эскизный проект (ЭП)", price: "9999 руб/м²", hasButton: true },
      { name: "Эскизный проект (ЭП)", price: "9999 руб/м²", hasButton: true },
      { name: "Эскизный проект (ЭП)", price: "9999 руб/м²", hasButton: true },
    ],
  },
];
---

<!-- Pricing -->
<Section name="pricing">
  <SectionHeader>
    <H4>[ прайс-лист ]</H4>
    <H2> Стоимость <i>услуг</i> </H2>
  </SectionHeader>

  <div class="pricing__list">
    {
      pricingData.map((section) => (
        <div class="pricing__table" data-section={section.id}>
          <div class="pricing__header">
            {section.id}. {section.title}
          </div>

          <div class="pricing__content">
            <div class="pricing__table-header">
              <div class="col">Наименование услуги</div>
              <div class="col">Стоимость</div>
            </div>

            <div class="pricing__services">
              {section.services.map((service, index) => (
                <div class="pricing__service" data-modal="callback">
                  <div class="col">
                    <div class="pricing__service-name">{service.name}</div>
                  </div>
                  <div class="col">
                    <div class="pricing__service-price">{service.price}</div>
                  </div>
                  <div class="col">
                    <button class="pricing__service-btn" data-modal="callback">
                      Заказать
                    </button>
                  </div>
                </div>
              ))}
            </div>
          </div>
        </div>
      ))
    }
  </div>
</Section>

<style lang="scss" is:global>
  @use "scss/helpers" as *;

  .pricing {
    position: relative;

    &__list {
      width: 100%;
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: rem(38) rem(20);

      @include media("lg") {
        grid-template-columns: 1fr;
        gap: rem(30);
      }
      @include media("sm") {
        gap: rem(20);
      }
    }

    &__table {
      overflow: hidden;
    }

    &__header {
      padding: rem(14) rem(16);
      color: #fff;
      font-size: rem(18);
      font-weight: 300;
      background: #222;
      display: flex;
      align-items: center;

      @include media("xs") {
        font-size: 1rem;
      }
    }

    &__content {
      border: 1px solid #e5e5e5;
      border-top: none;
    }

    &__table-header {
      font-style: italic;
      font-weight: 400;
    }

    &__service,
    &__table-header {
      height: rem(54);
      display: grid;
      grid-template-columns: 1fr rem(150) rem(130);
      align-items: center;
      border-bottom: 1px solid #f0f0f0;
      transition: background-color 0.2s ease;

      @include media("xs") {
        height: auto;
        font-size: rem(14);
        grid-template-columns: 1fr rem(150);
      }

      &:hover {
        background-color: #fafafa;
      }

      &:last-child {
        border-bottom: none;
      }
    }

    &__service {
      color: #222;
      font-weight: 300;
      cursor: pointer;

      .col:last-child {
        padding: 0;
        display: flex;
        align-items: center;
        justify-content: center;
      }
    }

    .col {
      padding: rem(16) rem(20);

      @include media("xs") {
        padding: rem(12) rem(15) !important;
      }
    }

    &__service-btn {
      padding: rem(7);
      @include size(rem(24));
      color: #fff;
      font-size: rem(16);
      font-weight: 300;
      background: #222;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: rem(12);
      transition: all 0.2s ease;

      @include media("xs") {
        width: 100% !important;
        justify-content: center;
      }

      &::before {
        content: "";
        display: block;
        @include size(rem(10));
        background: url('data:image/svg+xml,<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.5 1C11.5 0.723858 11.2761 0.5 11 0.5H6.5C6.22386 0.5 6 0.723858 6 1C6 1.27614 6.22386 1.5 6.5 1.5H10.5V5.5C10.5 5.77614 10.7239 6 11 6C11.2761 6 11.5 5.77614 11.5 5.5V1ZM1 11L1.35355 11.3536L11.3536 1.35355L11 1L10.6464 0.646447L0.646447 10.6464L1 11Z" fill="white"/></svg>')
          center/contain no-repeat;
      }

      &:hover {
        width: rem(110);
      }
    }

    &__service:hover &__service-btn {
      width: rem(110);
    }
  }
</style>
